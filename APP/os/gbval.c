/************************************************************************
 * 名称：全局变量管理
 * 简介：
 * 编写：邹应龙
 * 更新：2017-9-2                                              
 ************************************************************************/
#include "../main.h"

static u16 var_gb[GBVAL_MAX];

/************************************************************************
* 功能：增加计数
* 描述：
* 形参：序号
* 返回：         
************************************************************************/
void gbvar_increase(u8 num)
{
	if(num<GBVAL_MAX)
		var_gb[num]++;
}

/************************************************************************
* 功能：减少计数
* 描述：
* 形参：序号
* 返回：         
************************************************************************/
void gbvar_reduce(u8 num)
{
	if(num<GBVAL_MAX)
		var_gb[num]--;	
}

/************************************************************************
* 功能：设置计数
* 描述：
* 形参：序号，计数
* 返回：         
************************************************************************/
void gbvar_set(u8 num, u16 cnt)
{
	if(num<GBVAL_MAX)
		var_gb[num] = cnt;	
}
/************************************************************************
* 功能：取得计数
* 描述：
* 形参：序号
* 返回：         
************************************************************************/
u8 gbvar_get(u8 num)
{
	if(num<GBVAL_MAX)
		return var_gb[num];
	else
		return 0;
}

/************************************************************************
* 功能：清除计数
* 描述：
* 形参：序号
* 返回：         
************************************************************************/
void gbvar_clr(u8 num)
{
	if(num<GBVAL_MAX)
		var_gb[num] = 0;	
}

/************************************************************************
* 功能：定时器处理
* 描述：
* 形参：序号
* 返回：         
************************************************************************/
void gbvar_tmr(void)
{
	for(u8 i=GBVAL_TMR; i<GBVAL_MAX; i++)
	{
		if(var_gb[i] > 0)	var_gb[i]--;
	}
}

/************************************************************************
* 功能：初始化
* 描述：
* 形参：
* 返回：         
************************************************************************/
void gbvar_init(void)
{
	for(u8 i=0; i<GBVAL_MAX; i++)
		var_gb[i] = 0;
}